var DEBUG=!1,ACTIVE_USER="iamnbutler",LAST_FM=new LastFM({apiKey:"eb5004312b5007e85399ab8128cd90ff",apiSecret:"9b23d8f9a695517052683f6b80fe655a",cache:new LastFMCache}),DATASET=[],ARTISTS=[],WIDTH=492,HEIGHT=600,PADDING=0;$(document).ready(function(){$("#user").html(ACTIVE_USER),LAST_FM.library.getArtists({user:ACTIVE_USER},{success:function(t){t.artists.artist.forEach(function(t){DEBUG&&console.log(t.name+" was played "+t.playcount+" times by "+ACTIVE_USER),DATASET.push(t.playcount),ARTISTS.push(t.name)}),barchart(DATASET,ARTISTS,WIDTH,HEIGHT,PADDING)},error:function(t){}})}),barchart=function(t,r,e,a,n){var c=e||500,u=a||100,i=n||1,o=0;t.forEach(function(t){Number(o)<Number(t)&&(o=Number(t))});var T=d3.select("#chart").append("svg").attr("width",c).attr("height",u);T.selectAll("rect").data(t).enter().append("rect").attr("x",function(r,e){return e*(c/t.length)}).attr("y",function(t){return u-normalize(t,o,u/2)-u/2}).attr("width",c/t.length-i).attr("height",function(t){return normalize(t,o,u/2)}).attr("fill",function(t){return"rgb(0, 150, "+normalize(t,o,255)+")"})},normalize=function(t,r,e){return Math.round(t*e/r)};